/* Copyright (c) Microsoft. All rights reserved. See License.txt in the project root for license information.*/
!function(e,t){var n={boolean:!1,function:!0,object:!0,number:!1,string:!1,undefined:!1},e=n[typeof window]&&window||this,o=n[typeof exports]&&exports&&!exports.nodeType&&exports,r=n[typeof module]&&module&&!module.nodeType&&module,i=(r&&r.exports,n[typeof global]&&global);!i||i.global!==i&&i.window!==i||(e=i),"function"==typeof define&&define.amd?define(["rx-lite","angular","exports"],function(n,o,r){return e.Rx=t(e,r,n,o),e.Rx}):"object"==typeof module&&module&&module.exports==o?module.exports=t(e,module.exports,require("rx-lite"),require("angular")):e.Rx=t(e,{},e.Rx,e.angular)}(this,function(e,t,n,o,r){function i(e){return function(){try{return e.apply(this,arguments)}catch(e){return a.e=e,a}}}function s(e){if(!o.isFunction(e))throw new TypeError("fn must be a function");return i(e)}function u(){}var a={e:{}},l=o.module("rx",[]);l.factory("rx",function(e){e.Rx||(e.Rx=n);var t=function(e){function t(t,n,o){this._self=t,this._name=n,this._fn=o,e.call(this)}function r(e,t){this._self=e,this._name=t,this.isDisposed=!1}return n.internals.inherits(t,e),t.prototype.subscribeCore=function(e){var t=this._fn;return this._self[this._name]=function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];if(o.isFunction(t)){var u=s(t).apply(this,r);if(u===a)return e.onError(u.e);e.onNext(u)}else 1===r.length?e.onNext(r[0]):e.onNext(r)},new r(this._self,this._name)},r.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,delete this._self[this._name])},t}(n.ObservableBase);return n.createObservableFunction=function(e,n,o){return new t(e,n,o).publish().refCount()},e.Rx}),l.factory("observeOnScope",function(e){var t=function(t){function n(e,n,o){this._scope=e,this._expr=n,this._eq=o,t.call(this)}function o(e){return function(t,n){e.onNext({oldValue:n,newValue:t})}}function r(e){this._fn=e,this.isDisposed=!1}return e.internals.inherits(n,t),n.prototype.subscribeCore=function(e){return new r(this._scope.$watch(this._expr,o(e),this._eq))},r.prototype.dispose=function(){this.isDisposed||(this._fn(),this.isDisposed=!0)},n}(e.ObservableBase);return function(e,n,o){return new t(e,n,o)}}),n.Observable.prototype.safeApply=function(e,t,n,r){return t=o.isFunction(t)?t:u,n=o.isFunction(n)?n:u,r=o.isFunction(r)?r:u,this.takeWhile(function(){return!e.$$destroyed}).tap(function(n){e.$$phase||e.$root.$$phase?t(n):e.$apply(function(){t(n)})},function(t){e.$$phase||e.$root.$$phase?n(t):e.$apply(function(){n(t)})},function(){e.$$phase||e.$root.$$phase?r():e.$apply(function(){r()})})},l.config(function(e){e.decorator("$rootScope",function(e,t){return Object.defineProperties(e.constructor.prototype,{$toObservable:{value:function(e,n){var o=this;return t.Observable.create(function(r){var i=t.Disposable.create(o.$watch(e,function(e,t){r.onNext({oldValue:t,newValue:e})},n));return o.$on("$destroy",function(){i.dispose()}),i}).publish().refCount()},enumerable:!1,configurable:!0,writable:!0},$toObservableCollection:{value:function(e){var n=this;return t.Observable.create(function(o){var r=t.Disposable.create(n.$watchCollection(e,function(e,t){o.onNext({oldValue:t,newValue:e})}));return n.$on("$destroy",function(){r.dispose()}),r}).publish().refCount()},enumerable:!1,configurable:!0,writable:!0},$toObservableGroup:{value:function(e){var n=this;return t.Observable.create(function(o){var r=t.Disposable.create(n.$watchGroup(e,function(e,t){o.onNext({oldValue:t,newValue:e})}));return n.$on("$destroy",function(){r.dispose()}),r}).publish().refCount()},enumerable:!1,configurable:!0,writable:!0},$eventToObservable:{value:function(e,n){var r=this;return t.Observable.create(function(i){var u=t.Disposable.create(r.$on(e,function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(o.isFunction(n)){var u=s(n).apply(null,t);if(u===a)return i.onError(u.e);i.onNext(u)}else 1===t.length?i.onNext(t[0]):i.onNext(t)}));return r.$on("$destroy",function(){u.dispose()}),u}).publish().refCount()},enumerable:!1,configurable:!0,writable:!0},$createObservableFunction:{value:function(e,n){return t.createObservableFunction(this,e,n)},enumerable:!1,configurable:!0,writable:!0},$digestObservables:{value:function(e){var n=this;return t.Observable.pairs(e).flatMap(function(e){return e[1].digest(n,e[0]).map(function(t){return{observable:e[1],expression:e[0],value:t}})}).publish().refCount()},enumerable:!1,configurable:!0,writable:!0}}),e})}),l.run(function(e){var t=function(t){function r(e,n,o){this.source=e,this.$scope=n,this.prop=o,t.call(this)}return n.internals.inherits(r,t),r.prototype.subscribeCore=function(t){var r=e(this.prop).assign;if(!r)return t.onError(new Error("Property or expression is not assignable."));var i=new n.SingleAssignmentDisposable;return i.setDisposable(this.source.subscribe(new o(t,this.$scope,r))),this.$scope.$on("$destroy",function(){i.dispose()}),i},r}(n.ObservableBase),o=function(e){function t(t,n,o){this.o=t,this.$scope=n,this.propSetter=o,e.call(this)}return n.internals.inherits(t,e),t.prototype.next=function(e){if(this.$scope.$$phase)this.propSetter(this.$scope,e);else{var t=this;this.$scope.$apply(function(){t.propSetter(t.$scope,e)})}this.o.onNext(e)},t.prototype.error=function(e){this.o.onError(e)},t.prototype.completed=function(){this.o.onCompleted()},t}(n.internals.AbstractObserver);n.Observable.prototype.digest=function(e,n){return new t(this,e,n)}});n.ScopeScheduler=function(e){function t(t){this.$scope=t,e.call(this)}return n.internals.inherits(t,e),t.prototype.schedule=function(e,t){if(this.$scope.$$destroyed)return n.Disposable.empty;var o=new n.SingleAssignmentDisposable,r=this.$scope;r.$$phase||r.$root.$$phase?o.setDisposable(n.Disposable._fixup(e(t))):r.$apply.call(r,function(){o.setDisposable(n.Disposable._fixup(e(t)))})},t.prototype._scheduleFuture=function(e,t,o){if(this.$scope.$$destroyed)return n.Disposable.empty;var r=new n.SingleAssignmentDisposable,i=this.$scope,s=setTimeout(function(){if(i.$$destroyed||r.isDisposed)return clearTimeout(s);i.$$phase||i.$root.$$phase?r.setDisposable(n.Disposable._fixup(e(o))):i.$apply.call(i,function(){r.setDisposable(n.Disposable._fixup(e(o)))})},t);return new n.BinaryDisposable(r,n.Disposable.create(function(){clearTimeout(s)}))},t.prototype.schedulePeriodic=function(e,t,o){if(this.$scope.$$destroyed)return n.Disposable.empty;t=n.Scheduler.normalize(t);var r=this.$scope,i=e,s=setInterval(function(){if(r.$$destroyed)return clearInterval(s);r.$$phase||r.$root.$$phase?i=o(i):r.$apply.call(r,function(){i=o(i)})},t);return n.Disposable.create(function(){clearInterval(s)})},t}(n.Scheduler);return n});
//# sourceMappingURL=rx.lite.angular.map